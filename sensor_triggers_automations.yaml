# Livingroom blinds

- alias: Livingroom Blinds pull down
  initial_state: true
  trigger:
    - platform: numeric_state
      entity_id: sensor.blinds_livingroom_lux
      below: 100
  condition:
    - condition: state
      entity_id: input_boolean.blinds_livingroom
      state: 'on'
  action:
    - service: homeassistant.turn_on
      entity_id: script.livingroom_blinds_down
  
- alias: Livingroom Blinds pull up
  initial_state: true
  trigger:
    - platform: numeric_state
      entity_id: sensor.blinds_livingroom_lux
      above: 400
  condition:
    - condition: state
      entity_id: input_boolean.blinds_livingroom
      state: 'on'
  action:
    - service: homeassistant.turn_on
      entity_id: script.livingroom_blinds_up
  

# Black bathroom motion detection

- alias: Black Bathroom PIR on
  initial_state: true
  trigger:
    platform: state
    entity_id: binary_sensor.bathroom_pir
    from: 'off'
    to: 'on'
  condition:
    condition: state
    entity_id: input_boolean.bathroom_pir
    state: 'on'
  action:
  - service: script.turn_off
    entity_id: script.blackbath_lighton_10min
  - service: homeassistant.turn_on
    entity_id: script.blackbath_lighton_10min

- alias: Black Bathroom PIR off
  initial_state: true
  trigger:
    platform: state
    entity_id: input_boolean.bathroom_pir
    from: 'on'
    to: 'off'
  action:
  - service: automation.turn_off
    entity_id: automation.black_bathroom_pir_on
  - service: script.turn_off
    entity_id: script.blackbath_lighton_10min

# Livingroom Motion Detection 

- alias: Livingroom PIR on
  initial_state: true
  trigger:
    - platform: state
      entity_id: binary_sensor.livingroom_pir
      from: 'off'
      to: 'on'
  condition:
    - condition: state
      entity_id: input_boolean.livingroom_pir
      state: 'on'
  action:
    - service: script.turn_off
      entity_id: script.livingroom_10min
    - service: homeassistant.turn_on
      entity_id: script.livingroom_10min
    
- alias: Livingroom PIR stop
  initial_state: true
  trigger:
    - platform: state
      entity_id: input_boolean.livingroom_pir
      from: 'on'
      to: 'off'
  action:
    - service: automation.turn_off
      entity_id: automation.livingroom_pir_on
    - service: script.turn_off
      entity_id: script.livingroom_10min

# Ventilation on ensuite PIR

- alias: Ventilation ensuite PIR on
  initial_state: true
  trigger:
    platform: state
    entity_id: binary_sensor.bedroom_pir
    from: 'off'
    to: 'on'
  action:
  - service: homeassistant.turn_on
    entity_id: switch.ventilation

# Ventilation triggered by extractor fan in Kitchen

- alias: Ventilation extractor fan dummy switch
  initial_state: true
  trigger:
    - platform: state
      entity_id: binary_sensor.extractor_fan
      from: 'off'
      to: 'on'
  action:
    - delay: 00:00:02
    - service: homeassistant.turn_on
      entity_id: input_boolean.extractor_fan_dummy
    - delay: 00:00:03
    - service: homeassistant.turn_off
      entity_id: input_boolean.extractor_fan_dummy

- alias: Ventilation extractor fan on
  initial_state: true
  trigger:
    - platform: state
      entity_id: binary_sensor.extractor_fan
      from: 'off'
      to: 'on'
  condition:
    - condition: state
      entity_id: input_boolean.extractor_fan_dummy
      state: 'on'
  action:
    - service: homeassistant.turn_on
      entity_id: switch.ventilation

